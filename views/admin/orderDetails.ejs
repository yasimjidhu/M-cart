<!--header-->

<%- include('../user/partials/header') %>

<!--Navbar-->
<%-include('../admin/partials/nav') %>

<body style="background: linear-gradient(to top left, rgb(4, 75, 71), rgb(2, 89, 116));">

    
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-2 p-0">
            <%-include('../admin/partials/sidebar') %>
        </div>
        <div class="col-lg-6 p-0">
            <section class="h-100 gradient-custom shadow">
                <div class="container-fluid py-2 h-100 ">
                  <div class="row h-100 p-3">
                    <div class="col-12 px-2">
                      <div class="card shadow" style="border-radius: 10px;">
                        <div class="card-body p-4">
                          <div class="d-flex justify-content-between align-items-center mb-4">
                            <!-- <p class="lead fw-normal mb-0" style="color: #51d7e0;">Receipt</p> -->
                            <!-- <p class="small text-dark mb-0">Receipt Voucher : 1KAU9-84UIL</p> -->
                          </div>
                          <div class="card shadow-0 border mb-4">
                            <div class="card-body">
                                <% if (userOrderWithProducts && userOrderWithProducts.length > 0) { %>
                                  <% userOrderWithProducts.forEach(order => { %>
                                    <% if (order.userOrderedProducts) { %>
                                        <ul class="orderli">
                                            <li>Product</li>
                                            <li>Product Name</li>
                                            <li>Specififcation</li>
                                            <li>Quantity</li>
                                            <li>Price</li>
                                        </ul>
                                        <div class="row">
                                          <div class="col-md-3">
                                            <img src="/uploads/<%= order.userOrderedProducts.image[4] %>" class="img-fluid" alt="Phone" width="120px">
                                          </div>
                                          <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                            <p class="text-dark mb-0"><%= order.userOrderedProducts.productName %> </p>
                                          </div>
                                          <div class="col-md-3 text-center d-flex justify-content-center align-items-center">
                                            <p class="text-dark mb-0 small"><%= order.userOrderedProducts.specifications[0] %></p>
                                          </div>
                                          <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                            <p class="text-dark mb-0 small"> <%= order.products.quantity %></p>
                                          </div>
                                          <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                                            <p class="text-dark mb-0 small"><%= order.userOrderedProducts.price %></p>
                                          </div>
                                        </div>
                                        <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">
                                    <% } else { %>
                                      <h3>No data available</h3>
                                    <% } %>
                                  <% }) %>
                                <% } else { %>
                                  <h3>No data available</h3>
                                <% } %>
                              </div>
                          </div>
                          
        
                        
                          
                            <!-- <p class="text-dark mb-0"><span class="fw-bold me-4">Delivery Charges</span> Free</p> -->
                        </div>
                        <div class="card-footer border-0 "
                          style="background-color: #001524;padding: 7px; border-bottom-left-radius: 15px; border-bottom-right-radius: 10px; margin-bottom: 10px;">
                          <h5 class="d-flex align-items-center justify-content-end text-white text-uppercase mb-0">Total : <%=orderFound.totalAmount %></h5>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
        </div>
        <div class="col-4 mt-3 pl-3 sideUser">
            <div class="col-lg-12  userDpDiv2">
                <div class="row justify-content-center align-items-center">
                    <% if (userOrderWithProducts && userOrderWithProducts.length > 0) {
                        const order = userOrderWithProducts[0]; // Accessing the first order %>
                        <div class="col-5 p-0">
                            <div class="rounded-circle overflow-hidden" style="width: 75%; margin: auto;">
                                <% if (order.userProfileImage) { %>
                                    <img src="/uploads/profile_images/<%= order.userProfileImage %>" class="selected-image" alt="">
                                <% } else { %>
                                    <img src="/png/userNew.png" class="selected-image" alt="Default Image">
                                <% } %>
                            </div>
                        </div>
                        <div class="col-7 p-0">
                            <% if (order.userAddress && order.userAddress.length > 0) { %>
                                <% const address = order.userAddress[0].address[0]; %>
                                <p class="text-white tag"> <span class="order-span">Full Name:</span> <%= address.fullName %></p>
                                <p class="text-white tag"> <span class="order-span">Email:</span> <%= address.email %></p>
                                <p class="text-white tag"> <span class="order-span">Mobile: </span><%= address.phoneNumber %></p>
                                <p class="text-white tag"> <span class="order-span">PinCode:</span><%= address.pinCode %></p>
                                <!-- Other fields -->
                            <% } %>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="col-lg-12 mt-5 order-details">
                <% if(orderFound){ %>
                    <h6 class="order-value"><span class="order-data">Payment Mode:</span><%= orderFound.paymentmode %></h6>
                    <h6 class="order-value"><span class="order-data">Shipping Method:</span><%= orderFound.shippingMethod %></h6>
                    <h6 class="order-value"><span class="order-data">Delivery Date:</span><%= orderFound.deliveryDate.toLocaleString() %></h6>
                    <h6 class="order-value"><span class="order-data">Status:</span><%= orderFound.status %></h6>
                    <h6 class="order-value"><span class="order-data">Total Amount:</span><%= orderFound.totalAmount %></h6>
                <% } %>
            </div>
        </div>
</div>
</body>